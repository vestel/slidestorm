<iframe id="content" src="about:blank" width="100%" height="100%"></iframe>

<script type="text/javascript">
$(document).ready(function(){
        links = new Array(<%= @links.map { |link| "'#{link.url}'"}.join(", ") %>);
        refreshRate = <%= @refreshRate %>;
        index=0;
        cdata = 0;
        var active = false;
        var timeout;

        activate();

        function nextLink(){
                document.getElementById('content').src=links[index];
                console.log("Show: "+links[index]);
                index = (index+1) % links.length;
                if (index==0){
                    console.log("Full loop done");
                    location.reload(); 
                }
                timeout = setTimeout(function(){nextLink()}, refreshRate);
        }

        function activate(){
            active = true;
            nextLink();
        }

});
</script>
